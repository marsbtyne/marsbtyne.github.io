(this.webpackJsonpnycfridge=this.webpackJsonpnycfridge||[]).push([[0],{100:function(e,t,a){},122:function(e,t,a){e.exports={Loader:"Spinner_Loader__b2Z2P",load1:"Spinner_load1__2Lq4d"}},131:function(e,t,a){e.exports=a(203)},136:function(e,t,a){},139:function(e,t,a){},196:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),o=a(16),i=a(0),l=a.n(i),c=a(20),s=a.n(c),d=(a(136),a(27)),u=a(28),m=a(31),p=a(30),f=a(43),g=a(231),h=a(101),E=(a(139),a(67)),b=a.n(E);b.a.initializeApp({apiKey:"AIzaSyCOvDGXIuekFUUzSPh5l1940wCB657NudI",authDomain:"nycfridge-1595334632389.firebaseapp.com",databaseURL:"https://nycfridge-1595334632389.firebaseio.com",projectId:"nycfridge-1595334632389",storageBucket:"nycfridge-1595334632389.appspot.com",messagingSenderId:"1012323391989",appId:"1:1012323391989:web:0326829c1bd942705fe8bc",measurementId:"G-8G077TP9PC"});var v=b.a,C=a(11),y=a(40),O=a.n(y),k=a(29),j=a(56),w=a.n(j),F=a(64),x=a(234),S={google:{apiKey:"AIzaSyCOvDGXIuekFUUzSPh5l1940wCB657NudI"},defaultCenter:{address:"252 Broadway Brooklyn NY 11211",lat:40.7,lng:-73.9},defaultZoom:12},I=a(5),_=a(46),M=a.n(_),D=a(70),A=a.n(D),N=A.a.create({baseURL:"https://nycfridge-1595334632389.firebaseio.com/"});N.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",A.a.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded";var R=N,T=v.database(),L=v.storage(),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e,data:t}},G=function(e,t){return{type:"ADD_FRIDGE",data:t,id:e}},z=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,o,i,l,c,s,d,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return function(e){return e},n=function(e,t){return a(G(e.data.name,t)),e},a(B("ADD_FRIDGE_START")),M.a.setApiKey(S.google.apiKey),o={},i=e.streetAddress,l=i.concat(" ",e.borough," NY"),t.prev=7,t.next=10,M.a.fromAddress(l);case 10:return c=t.sent,s=c.results[0].geometry.location,d=s.lat,u=s.lng,o=Object(I.a)(Object(I.a)({},e),{},{lat:d,lng:u}),t.prev=13,t.next=16,R.post("/fridges.json",o);case 16:return m=t.sent,t.abrupt("return",n(m,o));case 20:t.prev=20,t.t0=t.catch(13),console.error("Could not submit to database");case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(7),console.error("Could not fetch coordinates");case 28:case"end":return t.stop()}}),t,null,[[7,25],[13,20]])})));return function(e){return t.apply(this,arguments)}}()},H=function(e,t,a){return function(){var n=Object(o.a)(r.a.mark((function n(o){var i,l,c,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(e,t,a,n){return console.log("success",t),a&&(console.log("image",a),o(P(e,t.data.name,a))),o(K(t.data.name,n)),t},o(B("CHECK_START")),n.prev=2,l={name:e.name,notes:e.notes,date:JSON.stringify(new Date)},c="/fridges/".concat(t.id,"/checks.json"),n.next=7,R.post(c,l);case 7:return s=n.sent,n.abrupt("return",i(t.id,s,a,l));case 11:n.prev=11,n.t0=n.catch(2),console.error("Could not post check");case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},U=function(e){return{type:"CONFIRM_FRIDGE",id:e}},K=function(e,t){return{type:"CHECK_FRIDGE",data:t,id:e}},P=function(e,t,a){return function(n){L.ref("images/".concat(e,"/").concat(t)).put(a).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){L.ref("images/".concat(e,"/")).child(t).getDownloadURL().then((function(a){console.log("postCheckImage url",a),T.ref("fridges/".concat(e,"/imageURL")).set(a),n(function(e,t){return{type:"POST_CHECK_IMAGE",url:e,id:t}}(a,t))}))}))}},Y=function(e){return e.fridges.find((function(t){return t.id==e.currentFridge}))},W=a(118),J=a.n(W),Z=(a(196),a(51)),q=a.n(Z),X=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:q.a.Info},l.a.createElement("div",{className:q.a.popupContainer},l.a.createElement("div",{className:q.a.popuBubbleAnchor},l.a.createElement(F.a,{border:"horizontal",pad:"xsmall",background:{color:"brand"},className:q.a.popupBubble},this.props.fridgeData.name,l.a.createElement("br",null),this.props.fridgeData.streetAddress," ",l.a.createElement("br",null)))))}}]),a}(i.Component),V=function(e){var t=e.showInfoBox,a=e.fridgeData,n=e.clickHandler;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"pin",onClick:function(e){n(a.id,e)}},l.a.createElement(J.a,{className:"pin-icon"}),t?l.a.createElement(X,{className:"mobile",fridgeData:a}):null,t?l.a.createElement(X,{className:"desktop",fridgeData:a}):null))},Q=a(44),$=a(239),ee=a(240),te=a(241),ae=a(60),ne=a.n(ae),re=a(120),oe=a.n(re),ie=a(50),le=a.n(ie),ce=a(223),se=a(229),de=a(233),ue=a(238),me=function(e){var t=Object(i.useState)(null),a=Object(Q.a)(t,2),n=a[0],r=a[1],o=Object(k.c)();return l.a.createElement(F.a,null,l.a.createElement("input",{type:"file",name:"file",id:"file",class:"inputfile",onChange:function(e){if(e.target.files[0]){var t=e.target.files[0];r(t)}}}),l.a.createElement("label",{for:"file"},"Upload Fridge Picture"),l.a.createElement(ce.a,{onSubmit:function(t){return a=t.value,r=e.f,o(H(a,r,n)),void e.cancelCheck(!1);var a,r}},l.a.createElement(F.a,{gap:"small"},l.a.createElement(se.a,{htmlFor:"text"},l.a.createElement(de.a,{size:"small",id:"textinput-id",name:"name",placeholder:"Your Name (optional)"})),l.a.createElement(se.a,{name:"notes",label:"Notes",htmlFor:"text-area",component:ue.a,placeholder:"leave your notes about this check-in here!"}),l.a.createElement(F.a,{direction:"row",gap:"xsmall"},l.a.createElement(x.a,{size:"small",active:!0,label:"Cancel",onClick:function(){return e.cancelCheck(!1)}}),l.a.createElement(x.a,{size:"small",type:"submit",primary:!0,label:"Submit Check"})))))},pe=function(e){var t=Object(i.useState)(!1),a=Object(Q.a)(t,2),n=a[0],r=a[1];Object(i.useEffect)((function(){}));var o=e.fridgeData,c=o.name,s=o.neighborhood,d=o.streetAddress,u=o.notes,m=o.link,p=o.instagram,f=o.lat,g=o.lng,h=o.checks,E=o.imageURL,b=m;p&&(b="http://www.instagram.com/"+p);var v=null;if(h){var C=function(){var e=[];for(var t in h)e.push(Object(I.a)(Object(I.a)({},h[t]),{},{id:t}));return e}(),y=C[C.length-1],O=JSON.parse(y.date),k=y.notes;O=new Date(O).toLocaleString();var j=E?l.a.createElement($.a,{fit:"contain",height:"400",width:"250",src:E}):null;v=l.a.createElement(F.a,{margin:"small",gap:"xsmall",style:{alignItems:"center"}},l.a.createElement("h3",null,"Last checked: ",O),"Most recent note:  ",k,j)}var w=l.a.createElement(F.a,{pad:{bottom:"large"}},l.a.createElement(x.a,{primary:!0,active:!0,onClick:function(){return r(!0)},label:"Check Fridge"})),S=l.a.createElement(me,{f:e.fridgeData,confirmCheck:e.submitCheck,cancelCheck:r}),_=l.a.createElement(x.a,{onClick:e.editFridge,label:"Edit Fridge"});return l.a.createElement(F.a,{overflow:"hidden"},l.a.createElement(F.a,{flex:!1,align:"center",direction:"row",tag:"header",style:{position:"relative"}},l.a.createElement(ee.a,{level:4},l.a.createElement("strong",null,l.a.createElement(x.a,{plain:!0,size:"large",alignSelf:"start",onClick:e.onClose,label:"Back To Map",icon:l.a.createElement(le.a,{fontSize:"large"})})))),l.a.createElement(F.a,{align:"center",margin:"medium",pad:"medium"},l.a.createElement("h2",null,c),l.a.createElement("h2",null,"Neighborhood: ",s),l.a.createElement("h3",null,"Location: ",l.a.createElement(te.a,{href:function(e,t){return"https://www.google.com/maps/dir/?api=1&destination=".concat(e,",",t)}(f,g)},d,l.a.createElement(ne.a,null))),l.a.createElement("h3",null,"Notes: ",u),p&&l.a.createElement(x.a,{href:b,icon:l.a.createElement(oe.a,null),label:"@".concat(p)}),v,n?S:w,_))},fe=a(227),ge=a(236),he=a(34),Ee=a.n(he),be=function(e){return l.a.createElement("div",null,l.a.createElement(fe.a,{background:"light-4",pad:"xsmall",justify:"center"},l.a.createElement(F.a,{margin:"xsmall",gap:"none",alignSelf:"center"},l.a.createElement(ee.a,{margin:"xsmall",pad:"none",level:"3"},"NYC Community Fridges"),l.a.createElement(F.a,{gap:"xsmall",direction:"row"},l.a.createElement(f.b,{to:{pathname:"/"}},l.a.createElement(te.a,null,"Map"))," |",l.a.createElement(f.b,{to:{pathname:"/about"}},l.a.createElement(te.a,null,"About"))," |",l.a.createElement(ge.a,null,"Current Fridge Count : ",e.fridges.length)," "))))},ve=a(57),Ce=a(230),ye=function(e){var t=Object(i.useState)(e.data?e.data:{}),a=Object(Q.a)(t,2),n=a[0],r=a[1],o=l.a.createElement(ee.a,null,"add"==e.type?"Add New Fridge":"Editing Fridge");return l.a.createElement(F.a,Object(ve.a)({overflow:"auto",pad:"medium",gap:"medium",margin:"medium"},"margin",{bottom:"100px"}),o,l.a.createElement(ce.a,{onSubmit:function(t){return function(t){e.onSubmit(t),e.onClose()}(t.value)},value:n,onChange:function(e){return r(e)}},l.a.createElement(se.a,{name:"name",htmlfor:"textinput-id",label:"Fridge Name"},l.a.createElement(de.a,{id:"textinput-id",name:"name",placeholder:"Community Fridge"})),l.a.createElement(se.a,{name:"streetAddress",htmlfor:"textinput-id",label:"Location"},l.a.createElement(de.a,{id:"textinput-id",name:"streetAddress",placeholder:"Street Address"})),l.a.createElement(se.a,{name:"borough",htmlfor:"textinput-id",label:"Borough"},l.a.createElement(Ce.a,{name:"borough",options:["Brooklyn","Manhattan","Queens","Bronx","Staten Island"]})),l.a.createElement(se.a,{name:"neighborhood",htmlfor:"textinput-id",label:"Neighborhood"},l.a.createElement(de.a,{id:"textinput-id",name:"neighborhood",placeholder:"Bushwick"})),l.a.createElement(se.a,{name:"instagram",htmlfor:"textinput-id",label:"Instagram handle"},l.a.createElement(de.a,{id:"textinput-id",name:"instagram",placeholder:"@yourfridge"})),l.a.createElement(se.a,{name:"link",htmlfor:"textinput-id",label:"Additional Link/Contact"},l.a.createElement(de.a,{id:"textinput-id",name:"link",placeholder:"Email address / volunteer form"})),l.a.createElement(se.a,{name:"notes",htmlfor:"textinput-id",label:"Notes"},l.a.createElement(ue.a,{id:"textinput-id",name:"notes",placeholder:"type anything else people should know about this fridge!"})),l.a.createElement(F.a,{direction:"row",gap:"medium",pad:{top:"large"}},l.a.createElement(x.a,{label:"close",onClick:e.onClose}),l.a.createElement(x.a,{type:"submit",primary:!0,label:"Submit"}),l.a.createElement(x.a,{type:"reset",label:"Reset"}))))},Oe=a(242),ke=a(228),je=a(61),we=a.n(je),Fe=function(e){return l.a.createElement(F.a,null,l.a.createElement(F.a,{pad:"large",size:"medium",align:"center"},l.a.createElement(ee.a,{level:"3"},"Welcome to the NYC Community Fridge Mapping project!"),l.a.createElement(Oe.a,{fill:"true"},"This map was initially developed in July 2020 to help keep track of the community fridges started by mutual aid groups. ",l.a.createElement("br",null),"We're currently working on an app that will help drivers and fridgekeepers to coordinate pickups and deliveries in addition to the map. ",l.a.createElement("br",null),"If you're interested in getting involved, drop a message in the general Community Food Share Signal and we'll get you added to the Fridge Tech Chat! ",l.a.createElement("br",null),"Any questions, comments, or corrections? Email ",l.a.createElement("strong",null,"mars.ballantyne@gmail.com "),"or DM ",l.a.createElement("strong",null," @plantpunx "),"on Instagram. ",l.a.createElement("br",null),"Want to help out with a fridge in your neighborhood? Send a DM to the Instagram page listed for the fridge :)"),l.a.createElement(ee.a,{level:"4"},"Adding a Fridge"),l.a.createElement(Oe.a,{fill:"true"},l.a.createElement("em",null,"Please only add / edit fridges if you are a fridgekeeper able to confirm the details and location of the fridge - thanks!"),l.a.createElement("br",null),'Use the "Add Fridge" button to add a new fridge to the map. Add in the name, address, instagram handle, and any other details.'),l.a.createElement(ee.a,{level:"4"},"Editing a Fridge"),l.a.createElement(Oe.a,{fill:"true"},'Edit a fridge by clicking the "edit" button on the fridge info page. ',l.a.createElement("br",null),'The form will look the same as the "add" form - just change whatever information needs to be updated.'),l.a.createElement(ee.a,{level:"4"},"Checking a Fridge"),l.a.createElement(Oe.a,{fill:"true"},"From the fridge info page, you can check a fridge to let everyone know the status. Leave a note and a picture, and it will automatically record the date and time so other fridge users can keep track of its current status and contents.")),l.a.createElement(ke.a,{className:Ee.a.Footer,justify:"center",background:"dark-2",pad:{horizontal:"large",vertical:"small"}},l.a.createElement(F.a,{height:"xxsmall"},l.a.createElement(ge.a,{size:"xsmall",textAlign:"center"},"Fridges are set up and maintained by mutual aid organizations and volunteers, aided by ",l.a.createElement(te.a,{href:"https://www.instagram.com/iohnyc/"},"IOHNYC.")," Feed people not landfills, food sovereignty for all. "),l.a.createElement(ge.a,{size:"xsmall",textAlign:"center"},"Site built using ",l.a.createElement(te.a,{href:"https://reactjs.org/"},"React, ")," UI components from ",l.a.createElement(te.a,{href:"https://v2.grommet.io/"},"Grommet.io. ")," Source code: ",l.a.createElement(te.a,{icon:l.a.createElement(we.a,{fontSize:"small"}),href:"https://github.com/marsbtyne/nycfridge"})))))};a(100);O.a.setAppElement("#root"),O.a.defaultStyles.content.maxWidth="700px",O.a.defaultStyles.content.margin="0 auto";var xe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).openSubmissionModal=function(){return n.setState({isSubmitModalOpen:!0})},n.openEditModal=function(){n.setState({isEditModalOpen:!0}),n.setState({isInfoModalOpen:!1})},n.openModal=function(e,t){n.props.setCurrentFridge(e),n.setState({isInfoModalOpen:!0})},n.downloadJSON=Object(o.a)(r.a.mark((function e(){var t,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchFridgesJSON();case 2:t=e.sent,console.log(t),a=window.URL.createObjectURL(new Blob([t])),(o=document.createElement("a")).href=a,o.setAttribute("download","sample.json"),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o);case 11:case"end":return e.stop()}}),e)}))),n.closeEditModal=function(){n.setState({isInfoModalOpen:!0,isEditModalOpen:!1})},n.closeModal=function(){n.setState({isInfoModalOpen:!1,isSubmitModalOpen:!1})},n.fridgeAdded=function(e){n.props.submitFridge(e)},n.updateFridge=function(e){console.log(e),n.props.updateFridge(e,n.props.currentFridge.id)},n.checkFridge=function(){n.setState({isChecking:!0})},n.submitCheck=function(){},n.state={isInfoModalOpen:!1,isSubmitModalOpen:!1,isEditModalOpen:!1,isChecking:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchFridges()}},{key:"render",value:function(){var e=this,t=this.props.fridges.map((function(t){return l.a.createElement(V,{key:t.id,lat:t.lat,lng:t.lng,fridgeData:t,showInfoBox:!0,clickHandler:e.openModal})}));return this.state.isEditModalOpen?l.a.createElement(me,{fridgeData:this.props.currentFridge}):l.a.createElement(pe,{fridgeData:this.props.currentFridge}),l.a.createElement("div",{className:Ee.a.Container},l.a.createElement(be,{fridges:this.props.fridges,showInfoBox:!0}),l.a.createElement(C.a,{path:"/about",component:Fe}),l.a.createElement(C.a,{path:"/",exact:!0,render:function(){return l.a.createElement("div",null,l.a.createElement(F.a,{justify:"center",direction:"row",pad:"xsmall",gap:"small"},l.a.createElement(x.a,{primary:!0,label:"Add Fridge",active:!0,onClick:e.openSubmissionModal})),l.a.createElement(O.a,{isOpen:e.state.isSubmitModalOpen,onRequestClose:e.closeModal},l.a.createElement(ye,{onClose:e.closeModal,onSubmit:e.fridgeAdded,type:"add"})),l.a.createElement(O.a,{isOpen:e.state.isEditModalOpen,onRequestClose:e.closeEditModal},l.a.createElement(ye,{onClose:e.closeEditModal,onSubmit:e.updateFridge,type:"edit",data:e.props.currentFridge})),l.a.createElement(F.a,{className:"google-map"},l.a.createElement(w.a,{bootstrapURLKeys:{key:S.google.apiKey},defaultCenter:S.defaultCenter,defaultZoom:S.defaultZoom,yesIWantToUseGoogleMapApiInternals:!0},t),l.a.createElement(O.a,{isOpen:e.state.isInfoModalOpen,onRequestClose:e.closeModal},l.a.createElement(pe,{fridgeData:e.props.currentFridge,onClose:e.closeModal,submitCheck:e.submitCheck,editFridge:e.openEditModal}))))}}))}}]),a}(i.Component),Se=Object(k.b)((function(e){return{fridges:e.fridges,currentFridge:Y(e)}}),(function(e){return{submitFridge:function(t){return e(z(t))},updateFridge:function(t,a){return e((n=t,i=a,function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return console.log(e.data),t(B("UPDATE_FRIDGE",e.data)),e},console.log(i),e.prev=2,o="/fridges/".concat(i,".json"),e.next=6,R.put(o,n);case 6:return l=e.sent,e.abrupt("return",a(l));case 10:e.prev=10,e.t0=e.catch(2),console.error("Could not update fridge.");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()));var n,i},fetchFridges:function(){return e(function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return t(B("LOAD_FRIDGES",e)),e},t(B("FETCH_FRIDGE_START")),n=[],e.prev=3,e.next=6,R.get("/fridges.json");case 6:for(i in(o=e.sent).data)n.push(Object(I.a)(Object(I.a)({},o.data[i]),{},{id:i}));return e.abrupt("return",a(n));case 11:e.prev=11,e.t0=e.catch(3),console.error("Data was not fetched.");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}())},fetchFridgesJSON:function(){return e(Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/fridges.json",{responseType:"blob",timeout:3e4});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.error("Data was not fetched.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))))},setCurrentFridge:function(t){return e(function(e){return function(t){t(B("SET_CURRENT",e))}}(t))}}}))(xe),Ie=a(235),_e=a(237),Me=a(122),De=a.n(Me),Ae=function(){return l.a.createElement("div",{className:De.a.Loader},"Loading...")},Ne=a(55),Re=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).bindResizeListener=function(e,t){t.event.addDomListenerOnce(e,"idle",(function(){e.gestureHandling="greedy"}))},n.handleApiLoaded=function(e,t){console.log("map",e,t),e.gestureHandling="greedy",n.bindResizeListener(e,t)},n.onModalOpen=function(e){n.props.getFridge(e),n.setState({modal:e})},n.modalClosedHandler=function(){n.setState({modal:null})},n.confirmCheck=function(e,t){n.props.onFridgeChecked(e,t,n.state.image),n.setState({checking:!1})},n.getMapLink=function(e){return"https://www.google.com/maps/dir/?api=1&destination=".concat(e.lat,",",e.lng)},n.getChecks=function(e){var t=[];for(var a in e.checks)t.push(Object(I.a)(Object(I.a)({},e.checks[a]),{},{id:a}));return t},n.handleChange=function(e){if(e.target.files[0]){var t=e.target.files[0];n.setState((function(){return{image:t}}))}},n.textInput=l.a.createRef(),n.focusTextInput=n.focusTextInput.bind(Object(Ne.a)(n)),n.submitButton=l.a.createRef(),n.state={modal:null,checking:!1,url:"",image:null,progress:0,showInfoBox:!0},n}return Object(u.a)(a,[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"render",value:function(){var e=this,t=this.props.currentFridge,a=null;if(t){var n,r,o;if(t.confirmed){if(n=l.a.createElement("h4",null,"Status: Confirmed"),r=l.a.createElement(F.a,{pad:{bottom:"large"}},l.a.createElement(x.a,{primary:!0,active:!0,onClick:function(){return e.setState({checking:!0})},label:"Check Fridge"})),t.checks){var i=this.getChecks(t),c=i[i.length-1],s=JSON.parse(c.date),d=c.notes,u=(s=new Date(s)).toLocaleString(),m=t.imageURL?l.a.createElement($.a,{fit:"contain",height:"400",width:"250",src:t.imageURL}):null;o=l.a.createElement(F.a,{margin:"small",gap:"xsmall",style:{alignItems:"center"}},l.a.createElement("h3",null,"Last checked: ",u),"Most recent note:  ",d,m)}this.state.checking&&(r=l.a.createElement(F.a,null,l.a.createElement("input",{type:"file",name:"file",id:"file",class:"inputfile",onChange:this.handleChange}),l.a.createElement("label",{for:"file"},"Upload Fridge Picture"),l.a.createElement(ce.a,{onSubmit:function(a){return e.confirmCheck(a.value,t)}},l.a.createElement(F.a,{gap:"small"},l.a.createElement(se.a,{htmlFor:"text"},l.a.createElement(de.a,{ref:this.textInput,onClick:this.focusTextInput,size:"small",id:"textinput-id",name:"name",placeholder:"Your Name (optional)"})),l.a.createElement(se.a,{name:"notes",label:"Notes",htmlFor:"text-area",ref:this.textInput,component:ue.a,placeholder:"leave your notes about this check-in here!"}),l.a.createElement(F.a,{direction:"row",gap:"xsmall"},l.a.createElement(x.a,{size:"small",active:!0,label:"Cancel",onClick:function(){return e.setState({checking:!1})}}),l.a.createElement(x.a,{ref:this.submitButton,size:"small",type:"submit",primary:!0,label:"Submit Check"}))))))}else n=l.a.createElement(F.a,null,l.a.createElement("h4",null,"Status: Unconfirmed"),l.a.createElement(x.a,{primary:!0,active:!0,onClick:function(){return e.props.onFridgeConfirmed(t)},label:"Confirm Fridge"}));a=l.a.createElement(F.a,{align:"center",margin:"medium",pad:"medium",overflow:"hidden"},l.a.createElement("h2",null,t.name),l.a.createElement("h2",null,"Neighborhood: ",t.neighborhood),l.a.createElement("h3",null,"Location: ",l.a.createElement(te.a,{href:this.getMapLink(t)},t.streetAddress,l.a.createElement(ne.a,null))),l.a.createElement("h3",null,"Notes: ",t.notes),l.a.createElement(x.a,{href:t.link,label:"Social Media"}),n,o,r)}return l.a.createElement(F.a,{className:"google-map"},this.state.modal&&l.a.createElement(Ie.a,{full:"vertical",onClickOutside:this.modalClosedHandler},l.a.createElement(F.a,{overflow:"hidden",width:"large"},l.a.createElement(F.a,{flex:!1,pad:{horizontal:"medium"},align:"center",direction:"row",tag:"header",justify:"between",style:{position:"relative"}},l.a.createElement(ee.a,{level:4},l.a.createElement("strong",null,l.a.createElement(x.a,{plain:!0,size:"large",alignSelf:"start",onClick:this.modalClosedHandler,label:"Back To Map",icon:l.a.createElement(le.a,{fontSize:"large"})})))),l.a.createElement(F.a,{flex:!0,align:"center",background:"light-1",overflow:"auto"},l.a.createElement(F.a,{flex:!1,background:"white"},a,l.a.createElement(x.a,{alignSelf:"center",margin:"medium",onClick:this.modalClosedHandler,label:"Back To Map",icon:l.a.createElement(le.a,null)}))))),l.a.createElement(w.a,{bootstrapURLKeys:{key:S.google.apiKey},defaultCenter:this.props.location,defaultZoom:this.props.zoomLevel,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}},this.props.fridges.map((function(t){return l.a.createElement(V,{lat:t.lat,lng:t.lng,fridgeData:t,showInfoBox:e.props.showInfoBox,toggleHover:e.props.toggleHover,hover:e.props.hover,onModalOpen:e.onModalOpen})}))))}}]),a}(i.Component),Te=Object(k.b)((function(e){return{currentFridge:e.currentFridge}}),(function(e){return{getFridge:function(t){return e(function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,o,i,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e){a(B("GET_FRIDGE",e))},o="/fridges/".concat(e,".json"),t.prev=2,t.next=5,R.get(o);case 5:return i=t.sent,l=Object(I.a)(Object(I.a)({},i.data),{},{id:e}),t.abrupt("return",n(l));case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},onFridgeConfirmed:function(t){return e(function(e){var t=Object(I.a)(Object(I.a)({},e),{},{confirmed:!0});return function(a){var n="/fridges/".concat(e.id,".json");R.put(n,t).then((function(t){console.log(t.data),a(U(e.id))}))}}(t))},onFridgeChecked:function(t,a,n){return e(H(t,a,n))},getFridgeChecks:function(t){return e(function(e){return function(t){var a="/fridges/".concat(e,"/checks.json");R.get(a).then((function(e){t(B("GET_FRIDGE_CHECKS",e.data))}))}}(t))}}}))(Re),Le=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onModalOpen=function(){n.setState({modal:!0})},n.modalClosedHandler=function(){n.setState({modal:!1})},n.toggleHover=function(e){var t=n.state.hover===e?null:e;n.setState({hover:t})},n.fridgeAdded=function(e){n.props.onFridgeAdded(e)},n.addFridge=function(){n.onModalOpen()},n.state={location:{address:"252 Broadway Brooklyn NY 11211",lat:40.7,lng:-73.9},hover:null,modal:!1,url:"",image:null,progress:0,showInfoBox:!0},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.onFridgesLoad()}},{key:"render",value:function(){var e=this,t=l.a.createElement(Ae,null),a=l.a.createElement(Ae,null);return this.props.fridges&&(t=l.a.createElement(Te,{location:this.state.location,zoomLevel:12,toggleHover:this.toggleHover,hover:this.state.hover,showInfoBox:this.state.showInfoBox,fridges:this.props.fridges}),a=l.a.createElement(Ie.a,{modal:!0,animation:"fadeIn",onEsc:this.modalClosedHandler,onClickOutside:this.modalClosedHandler},l.a.createElement(ye,{onClose:this.modalClosedHandler,onSubmit:this.fridgeAdded}))),l.a.createElement("div",{className:Ee.a.Container},l.a.createElement("div",{className:Ee.a.contentWrap},l.a.createElement(fe.a,{background:"light-4",pad:"xsmall",justify:"center"},l.a.createElement(F.a,{gap:"small",alignSelf:"center"},l.a.createElement(ee.a,{level:"3"},"NYC Community Fridges"),l.a.createElement(ge.a,null,"Current Fridge Count : ",this.props.fridges.length))),l.a.createElement(F.a,{justify:"center",direction:"row",pad:"xsmall",gap:"small"},l.a.createElement(x.a,{primary:!0,label:"Add Fridge",active:!0,onClick:this.addFridge}),l.a.createElement(_e.a,{name:"toggle",toggle:!0,checked:this.state.showInfoBox,label:"Show Fridge Info Boxes",onChange:function(t){return e.setState({showInfoBox:t.target.checked})}})),this.state.modal&&a,t),l.a.createElement(ke.a,{className:Ee.a.Footer,justify:"center",background:"dark-2",pad:{horizontal:"large",vertical:"small"}},l.a.createElement(F.a,{height:"xxsmall"},l.a.createElement(ge.a,{size:"xsmall",textAlign:"center"},"Fridges are set up and maintained by mutual aid organizations and volunteers, aided by ",l.a.createElement(te.a,{href:"https://www.instagram.com/iohnyc/"},"IOHNYC.")," Feed people not landfills, food sovereignty for all. "),l.a.createElement(ge.a,{size:"xsmall",textAlign:"center"},"Site built using ",l.a.createElement(te.a,{href:"https://reactjs.org/"},"React, ")," UI components from ",l.a.createElement(te.a,{href:"https://v2.grommet.io/"},"Grommet.io. ")," Source code: ",l.a.createElement(te.a,{icon:l.a.createElement(we.a,{fontSize:"small"}),href:"https://github.com/marsbtyne/nycfridge"})))))}}]),a}(i.Component),Be=(Object(k.b)((function(e){return{fridges:e.fridges,loading:e.loading}}),(function(e){return{onFridgeAdded:function(t){return e(z(t))}}}))(Le),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(e){return l.a.createElement(f.a,{basename:"/nycfridge"},l.a.createElement("div",{className:"App"},l.a.createElement(h.a,null,l.a.createElement("title",null,"Map of NYC Community Fridges"),l.a.createElement("meta",{name:"description",content:"Map of free community fridges and food shares across New York City"}),l.a.createElement("meta",{name:"keywords",content:"Community Fridges, Mutual Aid, fridge, nyc, foodshare, free food, community, refrigerators, fridge map, nyc fridges, nyc free food, nyc fridge map, nyc community fridges"})),l.a.createElement(g.a,null,l.a.createElement(Se,null))))}}]),a}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=a(45),ze=a(123),He=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,R.get("/fridges.json");case 4:for(n in(a=e.sent).data)t.push(Object(I.a)(Object(I.a)({},a.data[n]),{},{id:n}));return e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(1),console.error("Data was not fetched.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ue={fridges:[],loading:!1,submitted:!1,currentFridge:null},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIDGE_START":return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case"LOAD_FRIDGES":return Object(I.a)(Object(I.a)({},e),{},{fridges:t.data,loading:!1});case"GET_FRIDGE":return Object(I.a)(Object(I.a)({},e),{},{currentFridge:t.data,loading:!1});case"ADD_FRIDGE_START":return Object(I.a)(Object(I.a)({},e),{},{loading:!0,submitted:!1});case"SET_CURRENT":return Object(I.a)(Object(I.a)({},e),{},{currentFridge:t.data});case"CHECK_START":return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case"ADD_FRIDGE":var a=Object(I.a)(Object(I.a)({},t.data),{},{id:t.id,confirmed:!1});return Object(I.a)(Object(I.a)({},e),{},{fridges:e.fridges.concat(a),loading:!1,submitted:!0});case"UPDATE_FRIDGE":var n=e.fridges.map((function(a){return a.id===e.currentFridge&&(a=t.data),a}));return Object(I.a)(Object(I.a)({},e),{},{fridges:n});case"POST_CHECK_IMAGE":return Object(I.a)(Object(I.a)({},e),{},{currentFridge:Object(I.a)(Object(I.a)({},e.currentFridge),{},{imageURL:t.url}),loading:!1});case"CHECK_FRIDGE":var r=e.fridges.map((function(a){return a.id===e.currentFridge&&(a.checks||(a.checks={}),a.checks[t.id]=t.data),Object(I.a)(Object(I.a)({},a),{},{lastCheck:t.id})}));return Object(I.a)(Object(I.a)({},e),{},{fridges:r});case"GET_FRIDGE_CHECKS":return Object(I.a)(Object(I.a)({},e),{},{currentFridge:Object(I.a)(Object(I.a)({},e.currentFridge),{},{checks:t.data})});case"CONFIRM_FRIDGE":var o=e.fridges,i=o.map((function(e){return e.id===t.id&&(e.confirmed=!0),e}));return Object(I.a)(Object(I.a)({},e),{},{fridges:i,currentFridge:Object(I.a)(Object(I.a)({},e.currentFridge),{},{confirmed:!0})});default:return e}},Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.c,Ye=Object(Ge.d)(Ke,Pe(Object(Ge.a)(ze.a)));window.init=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:t=e.sent,a=l.a.createElement(k.a,{store:Ye},l.a.createElement(Be,{fridges:t})),s.a.render(a,document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));var We=document.createElement("script");We.src="https://maps.googleapis.com/maps/api/js?key=".concat(S.google.apiKey,"&callback=init"),We.defer=!0,document.head.appendChild(We),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){e.exports={Container:"container_Container__X1m1k",contentWrap:"container_contentWrap__1E3eC",Footer:"container_Footer__3RF1D"}},51:function(e,t,a){e.exports={Modal:"Modal_Modal__2pVUm",Info:"Modal_Info__1E4_K",popupBubble:"Modal_popupBubble__1Z61H",popupBubbleAnchor:"Modal_popupBubbleAnchor__3g4TB",popupContainer:"Modal_popupContainer__3hmTP"}}},[[131,1,2]]]);
//# sourceMappingURL=main.dfe5333e.chunk.js.map